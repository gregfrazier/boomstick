var $$NameScopeService=function(){"use strict";var seqIdentifier=0;var $$ScopeObject=function(parent,id){this.$$watchers=[];this.$$subscriptions=[];this.$$injections={};this.$$factory={};this.$$service={};this.$$models=[];this.$$children=[];this.$$namespace={};this.$$parent=parent;this.$$id=id||0;this.$$ns="$"};$$ScopeObject.prototype.$watch=function(exp,fn){this.$$watchers.push({exp:exp,fn:fn,last:this[exp],dirty:false,pristine:true,init:false})};$$ScopeObject.prototype.$bindModel=function(exp,modelName,modelScope){var nObj={exp:exp,modelName:modelName,modelScope:modelScope};var exists=this.$$models.filter(function(model){return model.modelName==nObj.modelName});if(exists.length>0){nObj=exists[0];nObj.exp=exp;nObj.modelScope=modelScope}else{Object.defineProperty(nObj,"$$Model",{get:function(){if(this.exp instanceof HTMLInputElement){return this.exp.getAttribute("type").toLowerCase()=="checkbox"?this.exp.checked:this.exp.value}return this.exp.getAttribute("value")},set:function(value){this.modelScope[this.modelName]=value;if(this.exp instanceof HTMLInputElement){if(this.exp.getAttribute("type").toLowerCase()=="checkbox"){this.exp.checked=value}else{this.exp.value=value}}else{this.exp.setAttribute("value",value);this.exp.innerHTML=value}this.modelScope.$$watcher.$digest(this.exp)}});this.$$models.push(nObj)}return nObj};$$ScopeObject.prototype.$new=function(ns){seqIdentifier++;var obj=new $$ScopeObject(this,seqIdentifier);obj.$$ns=ns||this.$$ns;this.$$children.push(obj);return obj};$$ScopeObject.prototype.$digest=function(source){var scope=this;this.$$watchers.forEach(function(watcher,idx){watcher.fn(source,watcher)})};$$ScopeObject.prototype.$namespace=function(appName,dependencies){if(this.$$namespace[appName]===undefined){Object.defineProperty(this.$$namespace,appName,{writable:false,enumerable:true,value:this.$new(appName)});var thisRef=this,ns=this.$$namespace[appName];["$delimiters","$fetch","$window","$document","$baseURL","$clone","$Expressions","$mustache","$utils","$dom","$t"].forEach(function(str){ns.$register(str,thisRef.$$injections[str])});ns.$register("$$ns",ns)}var ns=this.$$namespace[appName];if(dependencies!==undefined&&dependencies instanceof Array)for(var x=0;x<dependencies.length;x++){if(this.$$injections[dependencies[x]]!==undefined){ns.$register(dependencies[x],this.$$injections[dependencies[x]])}else if(this.$$factory[dependencies[x]]!==undefined){ns.$register(dependencies[x],this.$inject.apply(ns,this.$$factory[dependencies[x]]))}else if(this.$$service[dependencies[x]]!==undefined){ns.$register(dependencies[x],this.$$service[dependencies[x]](ns))}else{ns.$register(dependencies[x],undefined)}}return this.$$namespace[appName]};$$ScopeObject.prototype.$subscribe=function(fnName,callback){this.$$subscriptions.push({fn:fnName,callback:callback})};$$ScopeObject.prototype.$broadcast=function(fnName,result){var scope=this;this.$$subscriptions.filter(function(scrip){return scrip.fn===fnName}).forEach(function(scrip,idx){scrip.callback.call(scrip,result)})};$$ScopeObject.prototype.$register=function(fnName,fn){if(this.$$injections[fnName]===undefined)Object.defineProperty(this.$$injections,fnName,{writable:false,enumerable:true,value:fn});return this};$$ScopeObject.prototype.$registerFactory=function(fnName,fnArr){if(this.$$factory[fnName]===undefined)Object.defineProperty(this.$$factory,fnName,{writable:false,enumerable:true,value:fnArr});return this};$$ScopeObject.prototype.$registerService=function(fnName,fn){if(this.$$service[fnName]===undefined)Object.defineProperty(this.$$service,fnName,{writable:false,enumerable:true,value:fn});return this};$$ScopeObject.prototype.$getFactory=function(fnName){return this.$$factory[fnName]};$$ScopeObject.prototype.$inject=function(){var args=Array.prototype.slice.call(arguments).slice(0,arguments.length-1);var finalargs=[];if(args===undefined)return arguments[0]();for(var a in args){if(this.$$injections.hasOwnProperty(args[a])){finalargs.push(this.$$injections[args[a]])}else if(this.$$factory.hasOwnProperty(args[a])){finalargs.push(this.$inject.apply(this,this.$$factory[args[a]]))}else if(this.$$service.hasOwnProperty(args[a])){finalargs.push(this.$$service[args[a]](this))}else{finalargs.push(undefined)}}return arguments[arguments.length-1].apply(null,finalargs)};return $$ScopeObject}();var $boomStick=new $$NameScopeService;(function(){"use strict";var base=document.querySelector("base"),baseURL=base!==null&&base!==undefined?base.href:"/";$boomStick.$register("$delimiters",{attrPrefix:"bs-"}).$register("$fetch",window.fetch).$register("$window",window).$register("$document",document).$register("$baseURL",baseURL).$register("$clone",function(originalObject,circular){if(originalObject===undefined||originalObject===null)return originalObject;var propertyIndex,descriptor,keys,current,nextSource,indexOf,copies=[{source:originalObject,target:Object.create(Object.getPrototypeOf(originalObject))}],cloneObject=copies[0].target,sourceReferences=[originalObject],targetReferences=[cloneObject];while(current=copies.shift()){keys=Object.getOwnPropertyNames(current.source);for(propertyIndex=0;propertyIndex<keys.length;propertyIndex++){descriptor=Object.getOwnPropertyDescriptor(current.source,keys[propertyIndex]);if(!descriptor.value||typeof descriptor.value!=="object"){Object.defineProperty(current.target,keys[propertyIndex],descriptor);continue}nextSource=descriptor.value;descriptor.value=Array.isArray(nextSource)?[]:Object.create(Object.getPrototypeOf(nextSource));if(circular){indexOf=sourceReferences.indexOf(nextSource);if(indexOf!==-1){descriptor.value=targetReferences[indexOf];Object.defineProperty(current.target,keys[propertyIndex],descriptor);continue}sourceReferences.push(nextSource);targetReferences.push(descriptor.value)}Object.defineProperty(current.target,keys[propertyIndex],descriptor);copies.push({source:nextSource,target:descriptor.value})}}return cloneObject}).$registerFactory("$Expressions",[function(){return{evalBlock:function(str,scope){scope=scope||{};var valueStack=[],operStack=[],e={"+":function(y,x){return x+y},"-":function(y,x){return x-y},"*":function(y,x){return x*y},"/":function(y,x){return x/y}},prec=function(op1,op2){return op2=="("||op2==")"||(op1=="*"||op1=="/")&&(op2=="+"||op2=="-")?false:true},validOps=["+","-","*","/","!","(",")"];Array.from(str).map(function(curr){return validOps.indexOf(curr)>-1?{type:"o",val:curr}:curr.trim().length===0?{type:"w",val:curr}:{type:"l",val:curr}}).reduce(function(prev,curr,idx,arr){var proc={l:function(p){if(p.type=="l")p.literalValue+=String(curr.val);else prev.push({type:curr.type,literalValue:String(curr.val)})},o:function(p){prev.push({type:curr.type,operatorValue:String(curr.val),equality:false})},w:function(){return}};proc[curr.type](prev[prev.length-1]);return prev},[{type:"s"}]).forEach(function(o){var proc={s:function(){},l:function(){var complexTypeEval=function(s,v,i){if(s===undefined)return undefined;if(v.length-1==i)return s[v[i]];return complexTypeEval(s[v[i]],v,++i)};var v=/(true|false)/.test(o.literalValue)?o.literalValue==="false"?false:true:/[0-9]/i.test(o.literalValue.charAt(0))?parseFloat(o.literalValue):complexTypeEval(scope,o.literalValue.split("."),0);if(operStack[operStack.length-1]=="!"){v=!v;operStack.pop()}valueStack.push(v)},o:function(){var operate=function(){if(operStack[operStack.length-1]in e&&valueStack.length>1)valueStack.push(e[operStack.pop()](valueStack.pop(),valueStack.pop()));else operStack.pop()};switch(o.operatorValue){case"!":case"(":operStack.push(o.operatorValue);break;case"+":case"-":case"*":case"/":while(operStack.length>0&&prec(o.operatorValue,operStack[operStack.length-1]))operate();operStack.push(o.operatorValue);break;case")":while(operStack.length>0&&operStack[operStack.length-1]!="(")operate();operStack.pop();break}}};proc[o.type]()});while(operStack.length>0)if(operStack[operStack.length-1]in e&&valueStack.length>1)valueStack.push(e[operStack.pop()](valueStack.pop(),valueStack.pop()));else operStack.pop();return valueStack.pop()},equality:function(str,scope){var ltr=str.split("==");if(ltr.length==2){var l=this.evalBlock(ltr[0].trim(),scope);var r=this.evalBlock(ltr[1].trim(),scope);return l==r}else{return this.evalBlock(str,scope)}}}}]).$register("$mustache",$boomStick.$inject("$Expressions",function($exp){return function(str,scope,formatterScope){var mustacheTrigger=/\{\{([^\}]+)\}\}/g,varFormatter=/([^\}]*)\:([^\}]+)/g,bindvar=str,markdown=mustacheTrigger.exec(bindvar),bindOut=bindvar;while(markdown!==null){varFormatter.compile(varFormatter);var formatFn=varFormatter.exec(markdown[1]);if(formatFn!==null){if(formatterScope[formatFn[2]]!==undefined)bindOut=bindOut.replace(markdown[0],formatterScope[formatFn[2]].call(formatterScope,$exp.equality(formatFn[1],scope),scope))}else{if($exp.equality(markdown[1],scope)!==undefined&&$exp.equality(markdown[1],scope)!==null)bindOut=bindOut.replace(markdown[0],$exp.equality(markdown[1],scope))}markdown=mustacheTrigger.exec(bindvar)}return bindOut}}))})();(function(){"use strict";$boomStick.$register("$utils",{forEachElement:function(htmlCollection,callbackScope,callback){for(var i=0;i<htmlCollection.length;callback.call(callbackScope,htmlCollection[i],i),i++);},cleanSelector:function(sel){return sel.replace(/([#])([0-9])/g,"$1\\3$2 ")},snakeToCamel:function(s){return s.replace(/(\-\w)/g,function(m){return m[1].toUpperCase()})},encodeEntities:function(value){var SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;if(value===undefined||value===null)return"";return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0);var low=value.charCodeAt(1);return"&#"+((hi-55296)*1024+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}})})();(function(){"use strict";$boomStick.$register("$baselineDirectives",$boomStick.$inject("$delimiters","$baseURL","$Expressions",function(delimiters,baseURL,$exp){return[{name:"if",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers[0].length>0&&!$exp.equality(qualifiers[0],rootScope.$$localScope))if(htmlElement.parentNode){var c=document.createComment("if "+qualifiers[0]);htmlElement.parentNode.insertBefore(c,htmlElement);htmlElement.parentNode.removeChild(htmlElement)}}},{name:"repeater",type:"repeater",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){console.log("Repeater directive called");console.log(arguments)}},{name:"observe",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){rootScope.$$localScope.$$watcher.$watch(arguments,function(src,value,watch){var qualifiers=value.exp[2];if(qualifiers.length==2){var fn=$exp.equality(qualifiers[0],rootScope.$$localScope)||$exp.equality(qualifiers[0],rootScope.$$template.$$Scope);if(fn instanceof Function){fn($exp.encodeEntities($exp.equality(qualifiers[1],rootScope.$$localScope)),htmlElement,src,value,watch)}}})}},{name:"click",type:"deferred",eventType:"click",namespace:"std",implementation:function(event,scope,elementAttributes,qualifiers,rootScope,htmlElement){var defer=scope[args.shift()].apply(scope,args.map(function(o){return rootScope.$$localScope[o]}).concat([scope,event,rootScope,htmlElement,qualifiers]));if(defer)rootScope.decompose.call(rootScope)}},{name:"disabled",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers[0].length>0&&$exp.equality(qualifiers[0],rootScope.$$localScope))htmlElement["disabled"]=true}},{name:"checked",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers[0].length>0&&$exp.equality(qualifiers[0],rootScope.$$localScope))htmlElement["checked"]=true}},{name:"id",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){htmlElement.id=$exp.equality(qualifiers[0],rootScope.$$localScope)}},{name:"value",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(htmlElement instanceof HTMLInputElement)htmlElement.value=$exp.equality(qualifiers[0],rootScope.$$localScope);else htmlElement.setAttribute("value",$exp.equality(qualifiers[0],rootScope.$$localScope))}},{name:"view",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers.length==1){var evaluatedValue=$exp.encodeEntities($exp.equality(qualifiers[0],rootScope.$$localScope));htmlElement.innerHTML=evaluatedValue.length==0?"&nbsp;":evaluatedValue}else if(qualifiers.length==2){var fn=$exp.equality(qualifiers[0],rootScope.$$localScope)||$exp.equality(qualifiers[0],rootScope.$$template.$$Scope);if(fn instanceof Function){fn($exp.encodeEntities($exp.equality(qualifiers[1],rootScope.$$localScope)),htmlElement)}}rootScope.$$localScope.$$watcher.$watch(arguments,function(src,value,watch){if(qualifiers.length==1){var evaluatedValue=$exp.encodeEntities($exp.equality(qualifiers[0],rootScope.$$localScope));htmlElement.innerHTML=evaluatedValue.length==0?"&nbsp;":evaluatedValue}else if(qualifiers.length==2){var fn=$exp.equality(qualifiers[0],rootScope.$$localScope)||$exp.equality(qualifiers[0],rootScope.$$template.$$Scope);if(fn instanceof Function){fn($exp.encodeEntities($exp.equality(qualifiers[1],rootScope.$$localScope)),htmlElement)}}})}},{name:"directive",type:"shared",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){var ns=rootScope.$$template.$$NameSpace;if(qualifiers.length>0){ns.$inject(qualifiers[0],function(directive){if(!!directive.share)directive.share(elementAttributes,rootScope.$$localScope);if(!!directive.compileTemplate)directive.compileTemplate(directive.config(htmlElement,elementAttributes));return directive})}}},{name:"model",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){var a=arguments;if(htmlElement instanceof HTMLInputElement&&htmlElement.getAttribute("type").toLowerCase()=="checkbox"){var changed=function(ev){rootScope.$$localScope[qualifiers[0]]=htmlElement.checked;rootScope.$$localScope.$$watcher.$digest(ev.currentTarget)};["click"].forEach(function(o,i){htmlElement.addEventListener(o,changed,true)});var currentModelValue=$exp.equality(qualifiers[0],rootScope.$$localScope);if(htmlElement instanceof HTMLInputElement){if(currentModelValue===undefined){currentModelValue=htmlElement.checked;rootScope.$$localScope[qualifiers[0]]=currentModelValue}}}else{var changed=function(ev){rootScope.$$localScope[qualifiers[0]]=htmlElement.value;rootScope.$$localScope.$$watcher.$digest(ev.currentTarget)};["change","input"].forEach(function(o,i){htmlElement.addEventListener(o,changed,true)});var currentModelValue=$exp.equality(qualifiers[0],rootScope.$$localScope);if(htmlElement instanceof HTMLInputElement){if(currentModelValue===undefined){currentModelValue=htmlElement.value;rootScope.$$localScope[qualifiers[0]]=currentModelValue}}else{if(currentModelValue===undefined){currentModelValue=htmlElement.getAttribute("value");rootScope.$$localScope[qualifiers[0]]=currentModelValue}}}var model=rootScope.$$localScope.$$watcher.$bind(htmlElement,qualifiers[0],rootScope.$$localScope);model.$$Model=currentModelValue;rootScope.$$localScope.$$watcher.$digest(htmlElement)}},{name:"href",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers.length>0){var value=qualifiers[0].replace(/^\~\//,baseURL);value=$mustache(value,rootScope.$$localScope,rootScope);htmlElement.setAttribute("href",value)}}},{name:"change",type:"deferred",eventType:"change",namespace:"std",implementation:function(event,scope,elementAttributes,qualifiers,rootScope,htmlElement){console.log("Change called.")}}]}))})();(function(){"use strict";$boomStick.$register("$dom",$boomStick.$inject("$delimiters","$clone","$utils","$baselineDirectives",function($delimiters,$clone,$utils,$baselineDirectives){var __dom=function(selector,element){var rootElement=element||document;var select=function(s,element){return element["querySelectorAll"](s)};if(selector===undefined||selector===null)return null;if(selector instanceof HTMLElement||selector instanceof Text)rootElement=selector;return __dom.extend.call(__dom,selector instanceof HTMLElement||selector instanceof Text?[selector]:select(selector,element))};__dom.self=function(){return this};__dom.extend=function(element){var prototype=new this.self;function __domInstance(){this.init.apply(this,arguments)}__domInstance.prototype=prototype;__domInstance.prototype.constructor=__domInstance;__domInstance.extend=__dom.extend;return new __domInstance(element)};__dom.self.fn=__dom.self.prototype={init:function(element){this.$$target=element;this.$$wrapped=true;this.$$directives=[];this.$$localScope=null;this.$$template=null;this.directives={};this.__defaultDirectives()},register:function(scope,templateAppliance){this.$$template=templateAppliance;this.$$localScope=scope;return this},__defaultDirectives:function(){var thisRef=this;$baselineDirectives.forEach(function(directive){thisRef.__addStandardDirective(directive)})},__addStandardDirective:function(directiveDefinition){if(!this.$$directives.some(function(value){return value.name===directiveDefinition.name})){Object.defineProperty(this.directives,directiveDefinition.name,{writable:false,enumerable:true,value:directiveDefinition.implementation});this.registerDirective(directiveDefinition)}return this},registerDirective:function(directiveDefinition,scope){if(!this.$$directives.some(function(value){return value.name===directiveDefinition.name}))this.$$directives.push({name:directiveDefinition.name,scope:scope,type:directiveDefinition.type,deferredEvent:directiveDefinition.hasOwnProperty("eventType")?directiveDefinition.eventType:null,namespace:directiveDefinition.namespace});return this},identifyDirectives:function(attributeArray){return this.$$directives.filter(function(directive){return attributeArray.hasOwnProperty($delimiters.attrPrefix+directive.name)}).map(function(directive){return{directive:directive,attributeObject:attributeArray[$delimiters.attrPrefix+directive.name]}})},decompose:function(){var thisRef=this,repeaterNodes=[],attrList=this.attributeList;$utils.forEachElement(this.$$target,this.$$template.$$Scope,function(htmlElement){var __templateScope=this,repeaterElement=false,repeaterScope={};if(htmlElement.attributes!==undefined&&htmlElement.attributes!==null){var activeDirectives=thisRef.identifyDirectives(htmlElement.attributes);activeDirectives.forEach(function(directive,idx){if(directive.attributeObject!==undefined||directive.attributeObject!==null){var qualifiers=directive.attributeObject.value.split(":"),qualifiersMap=qualifiers.map(function(modifier){return modifier}),dirFunctionName=$utils.snakeToCamel(directive.directive.name),dirNamespace=directive.directive.namespace=="std"?thisRef.directives:__templateScope.directives,dirParamArray=[];dirParamArray=[__templateScope,directive.directive.type=="shared"?$clone(htmlElement.attributes,false):null,qualifiersMap,thisRef,htmlElement];if(directive.directive.type=="deferred"){htmlElement.addEventListener(directive.directive.deferredEvent,function(ev){dirParamArray.unshift(ev);dirNamespace[dirFunctionName].apply(thisRef.$$template,dirParamArray)})}else{dirNamespace[dirFunctionName].apply(thisRef.$$template,dirParamArray)}if(directive.directive.type=="repeater"&&thisRef.$$localScope.hasOwnProperty(parts[0])){repeaterElement=true;repeaterItemList=thisRef.localScope[parts[0]];var parentScope=thisRef.localScope;var repeaterContainer=htmlElement,repeaterTemplate=htmlElement.cloneNode(true).children;while(repeaterContainer.firstChild)repeaterContainer.removeChild(repeaterContainer.firstChild);repeaterItemList.forEach(function(listItem,idx){var fragment=document.createDocumentFragment();var c=document.createComment("repeat "+parts[0]);for(var childElement in repeaterTemplate)if(repeaterTemplate.hasOwnProperty(childElement)){var repeatedElement=repeaterTemplate[childElement].cloneNode(true);thisRef.$$template.iterateTextNodes(repeatedElement,thisRef.$$template.decomposeMustache(listItem),thisRef);fragment.appendChild(repeatedElement);listItem.$$watcher=thisRef.$$template.$$NameSpace.$new();listItem.$$parentScope=parentScope;repeaterNodes.push({childElement:repeatedElement,childScope:listItem})}fragment.appendChild(c);repeaterContainer.appendChild(fragment)})}}})}if(!!htmlElement&&!!htmlElement.parentNode)if(!repeaterElement){if(htmlElement.children!==undefined)Array.prototype.slice.call(htmlElement.children).forEach(function(childElement){__dom(childElement).register(thisRef.$$localScope,thisRef.$$template).decompose()})}else{repeaterNodes.forEach(function(node){__dom(node.childElement).register(node.childScope,thisRef.$$template).decompose()})}})}};return __dom}))})();(function(){"use strict";$boomStick.$register("$TemplateCache",$boomStick.$inject("$delimiters","$baseURL","$fetch",function(delimiters,baseURL,$fetch){var $TemplateCache=function(){this.$$templates=[]};$TemplateCache.prototype.$get=function(templateURL){return new Promise(function(resolve,reject){var template=this.$find(templateURL),templCache=this;if(template==null){$fetch(templateURL,{method:"GET",credentials:"same-origin"}).then(function(response){return response.text()}).then(function(data){templCache.$store(templateURL,data);resolve(data)})}else{resolve(template.code)}})};$TemplateCache.prototype.$find=function(templateURL){return this.$$templates.filter(function(template){return template.url==templateURL}).reduce(function(p,c){return p===null?c:p},null)};$TemplateCache.prototype.$store=function(templateURL,data){this.$$templates.push({url:templateURL,code:data})};return new $TemplateCache}))})();(function(){"use strict";$boomStick.$register("$t",$boomStick.$inject("$delimiters","$baseURL","$TemplateCache","$dom","$mustache",function(delimiters,baseURL,$TemplateCache,$dom,$mustache){return function(share,templateName,options,$$ns){var compiler={$$Scope:share,$$NameSpace:$$ns===undefined?$boomStick.$new():$$ns,__targetSelector:null,__templateIdentity:null,__internalScopedObj:null,locators:{},targetElements:null,template:"",cleanSelector:function(sel){return sel.replace(/([#])([0-9])/g,"$1\\3$2 ")},bind:function(scopedName,templateSelector,targetSelector){this.__targetSelector=targetSelector instanceof HTMLElement?targetSelector:this.cleanSelector(targetSelector);this.__internalScopedObj=scopedName;var promise=null,thisRef=this;if(templateSelector.hasOwnProperty("url")){promise=new Promise(function(resolve,reject){$TemplateCache.$get(baseURL+templateSelector.url).then(function(data){thisRef.template=data;resolve(thisRef)})})}else if(templateSelector.hasOwnProperty("code")){this.template=templateSelector.code;promise=Promise.resolve(thisRef)}else{this.template=document.querySelector(this.cleanSelector(templateSelector)).innerHTML;promise=Promise.resolve(thisRef)}return promise},encodeEntities:function(value){var SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;if(value===undefined||value===null)return"";return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0);var low=value.charCodeAt(1);return"&#"+((hi-55296)*1024+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},wrapMap:function(html){var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],body:[0,"",""],_default:[1,"<div>","</div>"]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;var match=/<\s*\w.*?>/g.exec(html),element=document.createElement("div"),children=null;if(match!=null){var tag=match[0].replace(/</g,"").replace(/>/g,"").split(" ")[0];if(tag.toLowerCase()==="body"){var dom=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),body=document.createElement("body");element.innerHTML=html.replace(/<body/g,"<div").replace(/<\/body>/g,"</div>");var attrs=element.firstChild.attributes;body.innerHTML=html;for(var i=0;i<attrs.length;i++){body.setAttribute(attrs[i].name,attrs[i].value)}return body}else{var map=wrapMap[tag]||wrapMap._default,element;html=map[1]+html+map[2];element.innerHTML=html;var j=map[0]+1;while(j--){element=element.lastChild;if(j==1&&element.children.length>1)children=element.children}}}else{element.innerHTML=html;element=element.lastChild}return children===null?element:children},iterateTextNodes:function(element,action,scope){if(element===undefined||element===null||element.childNodes===null||element.childNodes.length==0)return;for(var x=0;x<element.childNodes.length;x++)if(element.childNodes[x]instanceof Text)action.call(scope,element.childNodes[x],x);else this.iterateTextNodes(element.childNodes[x],action,scope)},index:function(dirty){var indexedData=this.$$Scope[this.__internalScopedObj].map(function(obj,idx){obj.$$index=idx;obj.$$dirty=dirty||true;obj.$$deleted=false;return obj});this.$$Scope[this.__internalScopedObj].splice(0);Array.prototype.push.apply(this.$$Scope[this.__internalScopedObj],indexedData);return this},apply:function(afterRenderFn){var data=this.$$Scope[this.__internalScopedObj],thisRef=this,locs=this.locators[this.__internalScopedObj];if(locs===undefined)locs=this.locators[this.__internalScopedObj]=[];var indexedData=data.filter(function(result){return!result.$$deleted}).map(function(result,idx){if(result.$$index!==idx){result.$$index=idx;result.$$dirty=true}if(result.$$dirty){var s=thisRef.template,t=thisRef.wrapMap(s.trim()),rowScope=result;var loc=locs[idx],repeaterId=thisRef.__internalScopedObj+" repeater";if(loc!==undefined){var removeList=[],curr;curr=loc.previousSibling;while(curr!=null){if(curr.nodeType===Node.COMMENT_NODE&&curr.nodeValue===repeaterId){curr=null}else{removeList.push(curr);curr=curr.previousSibling}}removeList.forEach(function(el){if(el.parentNode)el.parentNode.removeChild(el)})}if(rowScope.$$watcher===undefined)rowScope.$$watcher=thisRef.$$NameSpace.$new();if(!(t instanceof HTMLCollection))t=[t];for(var x=0;x<t.length;x++)thisRef.iterateTextNodes(t[x],function(obj,idx){obj.nodeValue=$mustache(obj.nodeValue,result,thisRef.$$Scope)},thisRef);var target=thisRef.__targetSelector instanceof HTMLElement?thisRef.__targetSelector:document.querySelector(thisRef.__targetSelector);if(loc!==undefined){if(!rowScope.$$deleted){var w=t.length,fragment=document.createDocumentFragment();while(w-- >0){var c=fragment.appendChild(t[0]);$dom(null,c).register(rowScope,thisRef).decompose()}if(loc.parentElement)loc.parentElement.insertBefore(fragment,loc);else loc.parentNode.insertBefore(fragment,loc)}else{loc.parentNode.removeChild(loc);locs[idx]=undefined}}else{var w=t.length,fragment=document.createDocumentFragment();while(w-- >0){var c=fragment.appendChild(t[0]);$dom(c).register(rowScope,thisRef).decompose()}var cmt=document.createComment(repeaterId);fragment.appendChild(cmt);target.appendChild(fragment);locs[idx]=cmt}result.$$dirty=false}return result});if(indexedData.length<locs.length){var stagnant=locs.splice(indexedData.length);stagnant.forEach(function(loc,idx){var repeaterId=thisRef.__internalScopedObj+" repeater";if(loc!=undefined){var removeList=[],curr;curr=loc.previousSibling;while(curr!=null){if(curr.nodeType===Node.COMMENT_NODE&&curr.nodeValue===repeaterId){curr=null}else{removeList.push(curr);curr=curr.previousSibling}}removeList.forEach(function(el){if(el.parentNode)el.parentNode.removeChild(el)});loc.parentNode.removeChild(loc)}})}this.$$Scope[this.__internalScopedObj].splice(0);Array.prototype.push.apply(this.$$Scope[this.__internalScopedObj],indexedData);if(afterRenderFn instanceof Function)afterRenderFn(thisRef.__targetSelector instanceof HTMLElement?thisRef.__targetSelector:document.querySelector(thisRef.__targetSelector))}};var bindresult=compiler.bind(options.scopedName,options.templateSelector,options.targetSelector);compiler.index();if(share["TemplateAppliance"]===undefined){Object.defineProperty(share,"TemplateAppliance",{enumerable:true,value:{}});Object.defineProperty(share["TemplateAppliance"],"$recycle",{enumerable:false,get:function(){return function(template,fn){if(template===undefined){for(var eng in share.TemplateAppliance){if(share.TemplateAppliance.hasOwnProperty(eng)&&eng!=="$recycle"&&share.TemplateAppliance[eng].apply instanceof Function){share.TemplateAppliance[eng].apply.call(share.TemplateAppliance[eng])}}}else{if(share.TemplateAppliance.hasOwnProperty(template)&&template!=="$recycle"&&share.TemplateAppliance[template].apply instanceof Function){share.TemplateAppliance[template].apply.call(share.TemplateAppliance[template],fn)}}}}})}if(share.TemplateAppliance[templateName]===undefined)Object.defineProperty(share["TemplateAppliance"],templateName,{get:function(){return compiler}});return bindresult}}))})();