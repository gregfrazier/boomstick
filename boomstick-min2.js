var $$NameScopeService=function(){"use strict";var seqIdentifier=0,$$ScopeObject=function(parent,id){this.$$watchers=[],this.$$subscriptions=[],this.$$injections={},this.$$factory={},this.$$service={},this.$$models=[],this.$$children=[],this.$$namespace={},this.$$parent=parent,this.$$id=id||0,this.$$ns="$"};return $$ScopeObject.prototype.$watch=function(exp,fn){this.$$watchers.push({exp:exp,fn:fn,last:this[exp],dirty:!1,pristine:!0,init:!1})},$$ScopeObject.prototype.$bindModel=function(exp,modelName,modelScope){var nObj={exp:exp,modelName:modelName,modelScope:modelScope},exists=this.$$models.filter(function(model){return model.modelName==nObj.modelName});return exists.length>0?(nObj=exists[0],nObj.exp=exp,nObj.modelScope=modelScope):(Object.defineProperty(nObj,"$$Model",{get:function(){return this.exp instanceof HTMLInputElement?"checkbox"==this.exp.getAttribute("type").toLowerCase()?this.exp.checked:this.exp.value:this.exp.getAttribute("value")},set:function(value){this.modelScope[this.modelName]=value,this.exp instanceof HTMLInputElement?"checkbox"==this.exp.getAttribute("type").toLowerCase()?this.exp.checked=value:this.exp.value=value:(this.exp.setAttribute("value",value),this.exp.innerHTML=value),this.modelScope.$$watcher.$digest(this.exp)}}),this.$$models.push(nObj)),nObj},$$ScopeObject.prototype.$new=function(ns){seqIdentifier++;var obj=new $$ScopeObject(this,seqIdentifier);return obj.$$ns=ns||this.$$ns,this.$$children.push(obj),obj},$$ScopeObject.prototype.$digest=function(source){this.$$watchers.forEach(function(watcher,idx){watcher.fn(source,watcher)})},$$ScopeObject.prototype.$namespace=function(appName,dependencies){if(void 0===this.$$namespace[appName]){Object.defineProperty(this.$$namespace,appName,{writable:!1,enumerable:!0,value:this.$new(appName)});var thisRef=this,ns=this.$$namespace[appName];["$delimiters","$fetch","$window","$document","$baseURL","$clone","$Expressions","$mustache","$utils","$dom","$t"].forEach(function(str){ns.$register(str,thisRef.$$injections[str])}),ns.$register("$$ns",ns)}var ns=this.$$namespace[appName];if(void 0!==dependencies&&dependencies instanceof Array)for(var x=0;x<dependencies.length;x++)void 0!==this.$$injections[dependencies[x]]?ns.$register(dependencies[x],this.$$injections[dependencies[x]]):void 0!==this.$$factory[dependencies[x]]?ns.$register(dependencies[x],this.$inject.apply(ns,this.$$factory[dependencies[x]])):void 0!==this.$$service[dependencies[x]]?ns.$register(dependencies[x],this.$$service[dependencies[x]](ns)):ns.$register(dependencies[x],void 0);return this.$$namespace[appName]},$$ScopeObject.prototype.$subscribe=function(fnName,callback){this.$$subscriptions.push({fn:fnName,callback:callback})},$$ScopeObject.prototype.$broadcast=function(fnName,result){this.$$subscriptions.filter(function(scrip){return scrip.fn===fnName}).forEach(function(scrip,idx){scrip.callback.call(scrip,result)})},$$ScopeObject.prototype.$register=function(fnName,fn){return void 0===this.$$injections[fnName]&&Object.defineProperty(this.$$injections,fnName,{writable:!1,enumerable:!0,value:fn}),this},$$ScopeObject.prototype.$registerFactory=function(fnName,fnArr){return void 0===this.$$factory[fnName]&&Object.defineProperty(this.$$factory,fnName,{writable:!1,enumerable:!0,value:fnArr}),this},$$ScopeObject.prototype.$registerService=function(fnName,fn){return void 0===this.$$service[fnName]&&Object.defineProperty(this.$$service,fnName,{writable:!1,enumerable:!0,value:fn}),this},$$ScopeObject.prototype.$getFactory=function(fnName){return this.$$factory[fnName]},$$ScopeObject.prototype.$inject=function(){var args=Array.prototype.slice.call(arguments).slice(0,arguments.length-1),finalargs=[];if(void 0===args)return arguments[0]();for(var a in args)this.$$injections.hasOwnProperty(args[a])?finalargs.push(this.$$injections[args[a]]):this.$$factory.hasOwnProperty(args[a])?finalargs.push(this.$inject.apply(this,this.$$factory[args[a]])):this.$$service.hasOwnProperty(args[a])?finalargs.push(this.$$service[args[a]](this)):finalargs.push(void 0);return arguments[arguments.length-1].apply(null,finalargs)},$$ScopeObject}(),$boomStick=new $$NameScopeService;!function(){"use strict";var base=document.querySelector("base"),baseURL=null!==base&&void 0!==base?base.href:"/";$boomStick.$register("$delimiters",{attrPrefix:"bs-"}).$register("$fetch",window.fetch).$register("$window",window).$register("$document",document).$register("$baseURL",baseURL).$register("$clone",function(originalObject,circular){if(void 0===originalObject||null===originalObject)return originalObject;for(var propertyIndex,descriptor,keys,current,nextSource,indexOf,copies=[{source:originalObject,target:Object.create(Object.getPrototypeOf(originalObject))}],cloneObject=copies[0].target,sourceReferences=[originalObject],targetReferences=[cloneObject];current=copies.shift();)for(keys=Object.getOwnPropertyNames(current.source),propertyIndex=0;propertyIndex<keys.length;propertyIndex++)if(descriptor=Object.getOwnPropertyDescriptor(current.source,keys[propertyIndex]),descriptor.value&&"object"==typeof descriptor.value){if(nextSource=descriptor.value,descriptor.value=Array.isArray(nextSource)?[]:Object.create(Object.getPrototypeOf(nextSource)),circular){if(indexOf=sourceReferences.indexOf(nextSource),indexOf!==-1){descriptor.value=targetReferences[indexOf],Object.defineProperty(current.target,keys[propertyIndex],descriptor);continue}sourceReferences.push(nextSource),targetReferences.push(descriptor.value)}Object.defineProperty(current.target,keys[propertyIndex],descriptor),copies.push({source:nextSource,target:descriptor.value})}else Object.defineProperty(current.target,keys[propertyIndex],descriptor);return cloneObject}).$registerFactory("$Expressions",[function(){return{evalBlock:function(str,scope){scope=scope||{};var valueStack=[],operStack=[],e={"+":function(y,x){return x+y},"-":function(y,x){return x-y},"*":function(y,x){return x*y},"/":function(y,x){return x/y}},prec=function(op1,op2){return"("!=op2&&")"!=op2&&("*"!=op1&&"/"!=op1||"+"!=op2&&"-"!=op2)},validOps=["+","-","*","/","!","(",")"];Array.from(str).map(function(curr){return validOps.indexOf(curr)>-1?{type:"o",val:curr}:0===curr.trim().length?{type:"w",val:curr}:{type:"l",val:curr}}).reduce(function(prev,curr,idx,arr){var proc={l:function(p){"l"==p.type?p.literalValue+=String(curr.val):prev.push({type:curr.type,literalValue:String(curr.val)})},o:function(p){prev.push({type:curr.type,operatorValue:String(curr.val),equality:!1})},w:function(){}};return proc[curr.type](prev[prev.length-1]),prev},[{type:"s"}]).forEach(function(o){var proc={s:function(){},l:function(){var complexTypeEval=function(s,v,i){if(void 0!==s)return v.length-1==i?s[v[i]]:complexTypeEval(s[v[i]],v,++i)},v=/(true|false)/.test(o.literalValue)?"false"!==o.literalValue:/[0-9]/i.test(o.literalValue.charAt(0))?parseFloat(o.literalValue):complexTypeEval(scope,o.literalValue.split("."),0);"!"==operStack[operStack.length-1]&&(v=!v,operStack.pop()),valueStack.push(v)},o:function(){var operate=function(){operStack[operStack.length-1]in e&&valueStack.length>1?valueStack.push(e[operStack.pop()](valueStack.pop(),valueStack.pop())):operStack.pop()};switch(o.operatorValue){case"!":case"(":operStack.push(o.operatorValue);break;case"+":case"-":case"*":case"/":for(;operStack.length>0&&prec(o.operatorValue,operStack[operStack.length-1]);)operate();operStack.push(o.operatorValue);break;case")":for(;operStack.length>0&&"("!=operStack[operStack.length-1];)operate();operStack.pop()}}};proc[o.type]()});for(;operStack.length>0;)operStack[operStack.length-1]in e&&valueStack.length>1?valueStack.push(e[operStack.pop()](valueStack.pop(),valueStack.pop())):operStack.pop();return valueStack.pop()},equality:function(str,scope){var ltr=str.split("==");if(2==ltr.length){var l=this.evalBlock(ltr[0].trim(),scope),r=this.evalBlock(ltr[1].trim(),scope);return l==r}return this.evalBlock(str,scope)}}}]).$register("$mustache",$boomStick.$inject("$Expressions",function($exp){return function(str,scope,formatterScope){for(var mustacheTrigger=/\{\{([^\}]+)\}\}/g,varFormatter=/([^\}]*)\:([^\}]+)/g,bindvar=str,markdown=mustacheTrigger.exec(bindvar),bindOut=bindvar;null!==markdown;){varFormatter.compile(varFormatter);var formatFn=varFormatter.exec(markdown[1]);null!==formatFn?void 0!==formatterScope[formatFn[2]]&&(bindOut=bindOut.replace(markdown[0],formatterScope[formatFn[2]].call(formatterScope,$exp.equality(formatFn[1],scope),scope))):void 0!==$exp.equality(markdown[1],scope)&&null!==$exp.equality(markdown[1],scope)&&(bindOut=bindOut.replace(markdown[0],$exp.equality(markdown[1],scope))),markdown=mustacheTrigger.exec(bindvar)}return bindOut}}))}(),function(){"use strict";$boomStick.$register("$utils",{forEachElement:function(htmlCollection,callbackScope,callback){for(var i=0;i<htmlCollection.length;callback.call(callbackScope,htmlCollection[i],i),i++);},cleanSelector:function(sel){return sel.replace(/([#])([0-9])/g,"$1\\3$2 ")},snakeToCamel:function(s){return s.replace(/(\-\w)/g,function(m){return m[1].toUpperCase()})},encodeEntities:function(value){var SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;return void 0===value||null===value?"":value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}})}(),function(){"use strict";$boomStick.$register("$baselineDirectives",$boomStick.$inject("$delimiters","$baseURL","$Expressions",function(delimiters,baseURL,$exp){return[{name:"if",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers[0].length>0&&!$exp.equality(qualifiers[0],rootScope.$$localScope)&&htmlElement.parentNode){var c=document.createComment("if "+qualifiers[0]);htmlElement.parentNode.insertBefore(c,htmlElement),htmlElement.parentNode.removeChild(htmlElement)}}},{name:"repeater",type:"repeater",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){console.log("Repeater directive called"),console.log(arguments)}},{name:"observe",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){rootScope.$$localScope.$$watcher.$watch(arguments,function(src,value,watch){var qualifiers=value.exp[2];if(2==qualifiers.length){var fn=$exp.equality(qualifiers[0],rootScope.$$localScope)||$exp.equality(qualifiers[0],rootScope.$$template.$$Scope);fn instanceof Function&&fn($exp.encodeEntities($exp.equality(qualifiers[1],rootScope.$$localScope)),htmlElement,src,value,watch)}})}},{name:"click",type:"deferred",eventType:"click",namespace:"std",implementation:function(event,scope,elementAttributes,qualifiers,rootScope,htmlElement){var defer=scope[args.shift()].apply(scope,args.map(function(o){return rootScope.$$localScope[o]}).concat([scope,event,rootScope,htmlElement,qualifiers]));defer&&rootScope.decompose.call(rootScope)}},{name:"disabled",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){qualifiers[0].length>0&&$exp.equality(qualifiers[0],rootScope.$$localScope)&&(htmlElement.disabled=!0)}},{name:"checked",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){qualifiers[0].length>0&&$exp.equality(qualifiers[0],rootScope.$$localScope)&&(htmlElement.checked=!0)}},{name:"id",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){htmlElement.id=$exp.equality(qualifiers[0],rootScope.$$localScope)}},{name:"value",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){htmlElement instanceof HTMLInputElement?htmlElement.value=$exp.equality(qualifiers[0],rootScope.$$localScope):htmlElement.setAttribute("value",$exp.equality(qualifiers[0],rootScope.$$localScope))}},{name:"view",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(1==qualifiers.length){var evaluatedValue=$exp.encodeEntities($exp.equality(qualifiers[0],rootScope.$$localScope));htmlElement.innerHTML=0==evaluatedValue.length?"&nbsp;":evaluatedValue}else if(2==qualifiers.length){var fn=$exp.equality(qualifiers[0],rootScope.$$localScope)||$exp.equality(qualifiers[0],rootScope.$$template.$$Scope);fn instanceof Function&&fn($exp.encodeEntities($exp.equality(qualifiers[1],rootScope.$$localScope)),htmlElement)}rootScope.$$localScope.$$watcher.$watch(arguments,function(src,value,watch){if(1==qualifiers.length){var evaluatedValue=$exp.encodeEntities($exp.equality(qualifiers[0],rootScope.$$localScope));htmlElement.innerHTML=0==evaluatedValue.length?"&nbsp;":evaluatedValue}else if(2==qualifiers.length){var fn=$exp.equality(qualifiers[0],rootScope.$$localScope)||$exp.equality(qualifiers[0],rootScope.$$template.$$Scope);fn instanceof Function&&fn($exp.encodeEntities($exp.equality(qualifiers[1],rootScope.$$localScope)),htmlElement)}})}},{name:"directive",type:"shared",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){var ns=rootScope.$$template.$$NameSpace;qualifiers.length>0&&ns.$inject(qualifiers[0],function(directive){return directive.share&&directive.share(elementAttributes,rootScope.$$localScope),directive.compileTemplate&&directive.compileTemplate(directive.config(htmlElement,elementAttributes)),directive})}},{name:"model",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(htmlElement instanceof HTMLInputElement&&"checkbox"==htmlElement.getAttribute("type").toLowerCase()){var changed=function(ev){rootScope.$$localScope[qualifiers[0]]=htmlElement.checked,rootScope.$$localScope.$$watcher.$digest(ev.currentTarget)};["click"].forEach(function(o,i){htmlElement.addEventListener(o,changed,!0)});var currentModelValue=$exp.equality(qualifiers[0],rootScope.$$localScope);htmlElement instanceof HTMLInputElement&&void 0===currentModelValue&&(currentModelValue=htmlElement.checked,rootScope.$$localScope[qualifiers[0]]=currentModelValue)}else{var changed=function(ev){rootScope.$$localScope[qualifiers[0]]=htmlElement.value,rootScope.$$localScope.$$watcher.$digest(ev.currentTarget)};["change","input"].forEach(function(o,i){htmlElement.addEventListener(o,changed,!0)});var currentModelValue=$exp.equality(qualifiers[0],rootScope.$$localScope);htmlElement instanceof HTMLInputElement?void 0===currentModelValue&&(currentModelValue=htmlElement.value,rootScope.$$localScope[qualifiers[0]]=currentModelValue):void 0===currentModelValue&&(currentModelValue=htmlElement.getAttribute("value"),rootScope.$$localScope[qualifiers[0]]=currentModelValue)}var model=rootScope.$$localScope.$$watcher.$bind(htmlElement,qualifiers[0],rootScope.$$localScope);model.$$Model=currentModelValue,rootScope.$$localScope.$$watcher.$digest(htmlElement)}},{name:"href",type:"immediate",namespace:"std",implementation:function(scope,elementAttributes,qualifiers,rootScope,htmlElement){if(qualifiers.length>0){var value=qualifiers[0].replace(/^\~\//,baseURL);value=$mustache(value,rootScope.$$localScope,rootScope),htmlElement.setAttribute("href",value)}}},{name:"change",type:"deferred",eventType:"change",namespace:"std",implementation:function(event,scope,elementAttributes,qualifiers,rootScope,htmlElement){console.log("Change called.")}}]}))}(),function(){"use strict";$boomStick.$register("$dom",$boomStick.$inject("$delimiters","$clone","$utils","$baselineDirectives",function($delimiters,$clone,$utils,$baselineDirectives){var __dom=function(selector,element){var rootElement=element||document,select=function(s,element){return element.querySelectorAll(s)};return void 0===selector||null===selector?null:((selector instanceof HTMLElement||selector instanceof Text)&&(rootElement=selector),__dom.extend.call(__dom,selector instanceof HTMLElement||selector instanceof Text?[selector]:select(selector,element)))};return __dom.self=function(){return this},__dom.extend=function(element){function __domInstance(){this.init.apply(this,arguments)}var prototype=new this.self;return __domInstance.prototype=prototype,__domInstance.prototype.constructor=__domInstance,__domInstance.extend=__dom.extend,new __domInstance(element)},__dom.self.fn=__dom.self.prototype={init:function(element){this.$$target=element,this.$$wrapped=!0,this.$$directives=[],this.$$localScope=null,this.$$template=null,this.directives={},this.__defaultDirectives()},register:function(scope,templateAppliance){return this.$$template=templateAppliance,this.$$localScope=scope,this},__defaultDirectives:function(){var thisRef=this;$baselineDirectives.forEach(function(directive){thisRef.__addStandardDirective(directive)})},__addStandardDirective:function(directiveDefinition){return this.$$directives.some(function(value){return value.name===directiveDefinition.name})||(Object.defineProperty(this.directives,directiveDefinition.name,{writable:!1,enumerable:!0,value:directiveDefinition.implementation}),this.registerDirective(directiveDefinition)),this},registerDirective:function(directiveDefinition,scope){return this.$$directives.some(function(value){return value.name===directiveDefinition.name})||this.$$directives.push({name:directiveDefinition.name,scope:scope,type:directiveDefinition.type,deferredEvent:directiveDefinition.hasOwnProperty("eventType")?directiveDefinition.eventType:null,namespace:directiveDefinition.namespace}),this},identifyDirectives:function(attributeArray){return this.$$directives.filter(function(directive){return attributeArray.hasOwnProperty($delimiters.attrPrefix+directive.name)}).map(function(directive){return{directive:directive,attributeObject:attributeArray[$delimiters.attrPrefix+directive.name]}})},decompose:function(){var thisRef=this,repeaterNodes=[];this.attributeList;$utils.forEachElement(this.$$target,this.$$template.$$Scope,function(htmlElement){var __templateScope=this,repeaterElement=!1;if(void 0!==htmlElement.attributes&&null!==htmlElement.attributes){var activeDirectives=thisRef.identifyDirectives(htmlElement.attributes);activeDirectives.forEach(function(directive,idx){if(void 0!==directive.attributeObject||null!==directive.attributeObject){var qualifiers=directive.attributeObject.value.split(":"),qualifiersMap=qualifiers.map(function(modifier){return modifier}),dirFunctionName=$utils.snakeToCamel(directive.directive.name),dirNamespace="std"==directive.directive.namespace?thisRef.directives:__templateScope.directives,dirParamArray=[];if(dirParamArray=[__templateScope,"shared"==directive.directive.type?$clone(htmlElement.attributes,!1):null,qualifiersMap,thisRef,htmlElement],"deferred"==directive.directive.type?htmlElement.addEventListener(directive.directive.deferredEvent,function(ev){dirParamArray.unshift(ev),dirNamespace[dirFunctionName].apply(thisRef.$$template,dirParamArray)}):dirNamespace[dirFunctionName].apply(thisRef.$$template,dirParamArray),"repeater"==directive.directive.type&&thisRef.$$localScope.hasOwnProperty(parts[0])){repeaterElement=!0,repeaterItemList=thisRef.localScope[parts[0]];for(var parentScope=thisRef.localScope,repeaterContainer=htmlElement,repeaterTemplate=htmlElement.cloneNode(!0).children;repeaterContainer.firstChild;)repeaterContainer.removeChild(repeaterContainer.firstChild);repeaterItemList.forEach(function(listItem,idx){var fragment=document.createDocumentFragment(),c=document.createComment("repeat "+parts[0]);for(var childElement in repeaterTemplate)if(repeaterTemplate.hasOwnProperty(childElement)){var repeatedElement=repeaterTemplate[childElement].cloneNode(!0);thisRef.$$template.iterateTextNodes(repeatedElement,thisRef.$$template.decomposeMustache(listItem),thisRef),fragment.appendChild(repeatedElement),listItem.$$watcher=thisRef.$$template.$$NameSpace.$new(),listItem.$$parentScope=parentScope,repeaterNodes.push({childElement:repeatedElement,childScope:listItem})}fragment.appendChild(c),repeaterContainer.appendChild(fragment)})}}})}htmlElement&&htmlElement.parentNode&&(repeaterElement?repeaterNodes.forEach(function(node){__dom(node.childElement).register(node.childScope,thisRef.$$template).decompose()}):void 0!==htmlElement.children&&Array.prototype.slice.call(htmlElement.children).forEach(function(childElement){__dom(childElement).register(thisRef.$$localScope,thisRef.$$template).decompose()}))})}},__dom}))}(),function(){"use strict";$boomStick.$register("$TemplateCache",$boomStick.$inject("$delimiters","$baseURL","$fetch",function(delimiters,baseURL,$fetch){var $TemplateCache=function(){this.$$templates=[]};return $TemplateCache.prototype.$get=function(templateURL){return new Promise(function(resolve,reject){var template=this.$find(templateURL),templCache=this;null==template?$fetch(templateURL,{method:"GET",credentials:"same-origin"}).then(function(response){return response.text()}).then(function(data){templCache.$store(templateURL,data),resolve(data)}):resolve(template.code)})},$TemplateCache.prototype.$find=function(templateURL){return this.$$templates.filter(function(template){return template.url==templateURL}).reduce(function(p,c){return null===p?c:p},null)},$TemplateCache.prototype.$store=function(templateURL,data){this.$$templates.push({url:templateURL,code:data})},new $TemplateCache}))}(),function(){"use strict";$boomStick.$register("$t",$boomStick.$inject("$delimiters","$baseURL","$TemplateCache","$dom","$mustache",function(delimiters,baseURL,$TemplateCache,$dom,$mustache){return function(share,templateName,options,$$ns){var compiler={$$Scope:share,$$NameSpace:void 0===$$ns?$boomStick.$new():$$ns,__targetSelector:null,__templateIdentity:null,__internalScopedObj:null,locators:{},targetElements:null,template:"",cleanSelector:function(sel){return sel.replace(/([#])([0-9])/g,"$1\\3$2 ")},bind:function(scopedName,templateSelector,targetSelector){this.__targetSelector=targetSelector instanceof HTMLElement?targetSelector:this.cleanSelector(targetSelector),this.__internalScopedObj=scopedName;var promise=null,thisRef=this;return templateSelector.hasOwnProperty("url")?promise=new Promise(function(resolve,reject){$TemplateCache.$get(baseURL+templateSelector.url).then(function(data){thisRef.template=data,resolve(thisRef)})}):templateSelector.hasOwnProperty("code")?(this.template=templateSelector.code,promise=Promise.resolve(thisRef)):(this.template=document.querySelector(this.cleanSelector(templateSelector)).innerHTML,promise=Promise.resolve(thisRef)),promise},encodeEntities:function(value){var SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;return void 0===value||null===value?"":value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},wrapMap:function(html){var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],body:[0,"",""],_default:[1,"<div>","</div>"]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var match=/<\s*\w.*?>/g.exec(html),element=document.createElement("div"),children=null;if(null!=match){var tag=match[0].replace(/</g,"").replace(/>/g,"").split(" ")[0];if("body"===tag.toLowerCase()){var body=(document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),document.createElement("body"));element.innerHTML=html.replace(/<body/g,"<div").replace(/<\/body>/g,"</div>");var attrs=element.firstChild.attributes;body.innerHTML=html;for(var i=0;i<attrs.length;i++)body.setAttribute(attrs[i].name,attrs[i].value);return body}var element,map=wrapMap[tag]||wrapMap._default;html=map[1]+html+map[2],element.innerHTML=html;for(var j=map[0]+1;j--;)element=element.lastChild,1==j&&element.children.length>1&&(children=element.children)}else element.innerHTML=html,element=element.lastChild;return null===children?element:children},iterateTextNodes:function(element,action,scope){if(void 0!==element&&null!==element&&null!==element.childNodes&&0!=element.childNodes.length)for(var x=0;x<element.childNodes.length;x++)element.childNodes[x]instanceof Text?action.call(scope,element.childNodes[x],x):this.iterateTextNodes(element.childNodes[x],action,scope)},index:function(dirty){var indexedData=this.$$Scope[this.__internalScopedObj].map(function(obj,idx){return obj.$$index=idx,obj.$$dirty=dirty||!0,obj.$$deleted=!1,obj});return this.$$Scope[this.__internalScopedObj].splice(0),Array.prototype.push.apply(this.$$Scope[this.__internalScopedObj],indexedData),this},apply:function(afterRenderFn){var data=this.$$Scope[this.__internalScopedObj],thisRef=this,locs=this.locators[this.__internalScopedObj];void 0===locs&&(locs=this.locators[this.__internalScopedObj]=[]);var indexedData=data.filter(function(result){return!result.$$deleted}).map(function(result,idx){if(result.$$index!==idx&&(result.$$index=idx,result.$$dirty=!0),result.$$dirty){var s=thisRef.template,t=thisRef.wrapMap(s.trim()),rowScope=result,loc=locs[idx],repeaterId=thisRef.__internalScopedObj+" repeater";if(void 0!==loc){var curr,removeList=[];for(curr=loc.previousSibling;null!=curr;)curr.nodeType===Node.COMMENT_NODE&&curr.nodeValue===repeaterId?curr=null:(removeList.push(curr),curr=curr.previousSibling);removeList.forEach(function(el){el.parentNode&&el.parentNode.removeChild(el)})}void 0===rowScope.$$watcher&&(rowScope.$$watcher=thisRef.$$NameSpace.$new()),t instanceof HTMLCollection||(t=[t]);for(var x=0;x<t.length;x++)thisRef.iterateTextNodes(t[x],function(obj,idx){obj.nodeValue=$mustache(obj.nodeValue,result,thisRef.$$Scope)},thisRef);var target=thisRef.__targetSelector instanceof HTMLElement?thisRef.__targetSelector:document.querySelector(thisRef.__targetSelector);if(void 0!==loc)if(rowScope.$$deleted)loc.parentNode.removeChild(loc),locs[idx]=void 0;else{for(var w=t.length,fragment=document.createDocumentFragment();w-- >0;){var c=fragment.appendChild(t[0]);$dom(null,c).register(rowScope,thisRef).decompose()}loc.parentElement?loc.parentElement.insertBefore(fragment,loc):loc.parentNode.insertBefore(fragment,loc)}else{for(var w=t.length,fragment=document.createDocumentFragment();w-- >0;){var c=fragment.appendChild(t[0]);$dom(c).register(rowScope,thisRef).decompose()}var cmt=document.createComment(repeaterId);fragment.appendChild(cmt),target.appendChild(fragment),locs[idx]=cmt}result.$$dirty=!1}return result});if(indexedData.length<locs.length){var stagnant=locs.splice(indexedData.length);stagnant.forEach(function(loc,idx){var repeaterId=thisRef.__internalScopedObj+" repeater";if(void 0!=loc){var curr,removeList=[];for(curr=loc.previousSibling;null!=curr;)curr.nodeType===Node.COMMENT_NODE&&curr.nodeValue===repeaterId?curr=null:(removeList.push(curr),curr=curr.previousSibling);removeList.forEach(function(el){el.parentNode&&el.parentNode.removeChild(el)}),loc.parentNode.removeChild(loc)}})}this.$$Scope[this.__internalScopedObj].splice(0),Array.prototype.push.apply(this.$$Scope[this.__internalScopedObj],indexedData),afterRenderFn instanceof Function&&afterRenderFn(thisRef.__targetSelector instanceof HTMLElement?thisRef.__targetSelector:document.querySelector(thisRef.__targetSelector))}},bindresult=compiler.bind(options.scopedName,options.templateSelector,options.targetSelector);return compiler.index(),void 0===share.TemplateAppliance&&(Object.defineProperty(share,"TemplateAppliance",{enumerable:!0,value:{}}),Object.defineProperty(share.TemplateAppliance,"$recycle",{enumerable:!1,get:function(){return function(template,fn){if(void 0===template)for(var eng in share.TemplateAppliance)share.TemplateAppliance.hasOwnProperty(eng)&&"$recycle"!==eng&&share.TemplateAppliance[eng].apply instanceof Function&&share.TemplateAppliance[eng].apply.call(share.TemplateAppliance[eng]);else share.TemplateAppliance.hasOwnProperty(template)&&"$recycle"!==template&&share.TemplateAppliance[template].apply instanceof Function&&share.TemplateAppliance[template].apply.call(share.TemplateAppliance[template],fn)}}})),void 0===share.TemplateAppliance[templateName]&&Object.defineProperty(share.TemplateAppliance,templateName,{get:function(){return compiler}}),bindresult}}))}();